{% extends "base.html" %}
{% load form_tags %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <h2 class="mb-0">
    <i class="bi bi-sliders text-primary me-2"></i>Warehouse Settings
  </h2>
  <div>
    <a href="{% url 'inventory:warehouse_create' %}" class="btn btn-primary me-2">
      <i class="bi bi-plus-circle me-1"></i>Add Warehouse
    </a>
    <a href="{% url 'inventory:location_create' %}" class="btn btn-outline-primary">
      <i class="bi bi-geo-alt me-1"></i>Add Location
    </a>
  </div>
</div>

<div class="row">
  {% for wh in warehouses %}
    <div class="col-md-6 col-lg-4 mb-4">
      <div class="card border-0 shadow-lg h-100">
        <div class="card-header bg-primary text-white">
          <h5 class="mb-0">
            <i class="bi bi-building me-2"></i>{{ wh.name }}
            <span class="badge bg-light text-dark ms-2">{{ wh.code }}</span>
          </h5>
        </div>
        <div class="card-body">
          <p class="text-muted mb-3">
            <i class="bi bi-geo-alt me-1"></i>{{ wh.address|default:"No address specified" }}
          </p>
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h6 class="mb-0">
              <i class="bi bi-layout-text-sidebar me-1"></i>Locations
            </h6>
            <span class="badge bg-secondary">{{ wh.locations.count }}</span>
          </div>
          <div class="list-group list-group-flush">
            {% for loc in wh.locations.all %}
              <div class="list-group-item px-0">
                <div>
                  <strong>{{ loc.code }}</strong> - {{ loc.name }}
                  {% if loc.is_default %}
                    <span class="badge bg-success ms-2">Default</span>
                  {% endif %}
                </div>
              </div>
            {% empty %}
              <div class="list-group-item text-muted px-0">
                <i class="bi bi-inbox me-1"></i>No locations yet.
              </div>
            {% endfor %}
          </div>
        </div>
        <div class="card-footer bg-light border-0">
          <div class="d-flex justify-content-between">
            <!-- Edit functionality can be added later -->
            <a href="{% url 'inventory:location_create' %}?warehouse={{ wh.pk }}" class="btn btn-sm btn-outline-success">
              <i class="bi bi-plus-circle me-1"></i>Add Location
            </a>
          </div>
        </div>
      </div>
    </div>
  {% empty %}
    <div class="col-12">
      <div class="card border-0 shadow-lg">
        <div class="card-body text-center py-5">
          <i class="bi bi-building text-muted" style="font-size: 4rem;"></i>
          <h4 class="mt-3 mb-2">No Warehouses Defined</h4>
          <p class="text-muted mb-4">Get started by creating your first warehouse.</p>
          <a href="{% url 'inventory:warehouse_create' %}" class="btn btn-primary btn-lg">
            <i class="bi bi-plus-circle me-2"></i>Create Warehouse
          </a>
        </div>
      </div>
    </div>
  {% endfor %}
</div>
{% endblock %}


